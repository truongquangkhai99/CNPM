<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<title>Quiz</title>
<link th:href="@{/bootstrap/css/bootstrap.min.css}" rel="stylesheet">
<link th:href="@{/css/profile.css}" rel="stylesheet">
<link th:href="@{/css/loading.css}" rel="stylesheet">
<link th:href="@{/css/responsive.css}" rel="stylesheet">
<link th:href="@{/fonts/css/font-awesome.min.css}" rel="stylesheet">

</head>

<body>
	<!--	menu fixed top-->
	<th:block th:fragment="menu_fix_top">
		<nav id="header" class="navbar navbar-fixed-top">
			<div id="header-container" class="container navbar-container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed"
						data-toggle="collapse" data-target="#navbar" aria-expanded="false"
						aria-controls="navbar">
						<span class="sr-only">Toggle navigation</span> <span
							class="icon-bar"></span> <span class="icon-bar"></span> <span
							class="icon-bar"></span>
					</button>
					<a id="brand" class="navbar-brand" href="#"> <span
						id="open-slide" style="font-size: 30px; cursor: pointer"
						onclick="openNav()">&#9776;</span> <span id="close-slide"
						style="font-size: 30px; cursor: pointer" onclick="closeNav()">&times;</span>
					</a>
				</div>
				<div id="navbar" class="collapse navbar-collapse">

					<ul class="nav navbar-nav navbar-right">
						<li class="dropdown"><a href="#" class="dropdown-toggle"
							data-toggle="dropdown"> <i class="fa fa-television"></i> Quản
								lý <span class="caret"></span>
						</a>
							<ul class="dropdown-menu">
								<li><a href="#">Quản lý câu hỏi</a></li>
								<li><a href="#">Quản lý đề thi</a></li>
							</ul></li>

						<li class="dropdown"><a href="#" class="dropdown-toggle"
							data-toggle="dropdown"> <i class="fa fa-comment-o"></i> Thông
								báo <span class="caret"></span>
						</a>
							<ul class="dropdown-menu">
								<li>Không có thông báo</li>
								<li class="divider"></li>
							</ul></li>

						<li class="dropdown"><a href="#" class="dropdown-toggle"
							data-toggle="dropdown"> <img
								th:src="@{${session.account.avatar}}"
								alt="Ảnh đại diện" width="19px" class="img-circle" /><span
								th:text="${session.account.name}"></span> <span class="caret"></span>
						</a>
							<ul class="dropdown-menu">
								<li><a th:href="@{/account/info}">Hồ sơ</a></li>
								<li><a href="#">Chỉnh sửa</a></li>
								<li class="divider"></li>
								<li><a href="#">Trợ giúp</a></li>
								<li><a th:href="@{/account/logout}">Đăng xuất</a></li>
							</ul></li>
					</ul>
				</div>
			</div>
		</nav>
	</th:block>
	<div class="container">
		<!--	slider menu-->
		<div id="mySidenav" class="sidenav">
			<a href="homepage.html">Trang chủ</a> <a href="#">Thông tin</a> <a
				href="#">Dịch vụ</a> <a href="#">Liên hệ</a>
			<div class="form-group">
				<label for="room" class="col-sm-3 control-label">Mã phòng</label>
				<div class="col-sm-9">
					<div class="loader">
						<div class="bar"></div>
						<div class="bar"></div>
						<div class="bar"></div>
					</div>
				</div>
			</div>
		</div>

		<!--       nội dung trang web-->
		<div id="main">
			<div class="container-fluid">
				<div class="row">
					<div class="col-md-4">
						<!--					thông tin cá nhân-->
						<div class="divcontent row">
							<div class="col-md-5 col-sm-6 col-xs-12">
								<img class="img-circle img-responsive"
									th:src="@{${session.account.avatar}}"
									alt="Ảnh đại diện" />
							</div>

							<div class="col-md-7 col-sm-6 col-xs-12">
								<h4 th:text="${session.account.name}"></h4>
								<h5 th:text="${session.account.job}"></h5>
							</div>
						</div>
						<!--						danh sách phòng tham gia-->
						<div class="divcontent">
							<h4>Phòng tham gia</h4>
							<select class="form-control"
								onchange="if(this.value!=null && this.value!= undefined && this.value!='') location= this.value;">
								<option value="">Chọn phòng</option>
								<th:block th:each="room : ${listRoomParticipation}">
									<option
										th:value="@{/classRoom/{idRoom}(idRoom=${room.idRoom})}"
										th:text="${room.roomName}+' - '+${room.idRoom}"></option>

								</th:block>

							</select>
							<hr />
							<button type="button" class="btn btn-default" data-toggle="modal"
								data-target="#tham-gia-phong">
								<i class="fa fa-plus"></i> Tham gia phòng khác
							</button>
						</div>
						<!--						hiển thị div nhập mã phòng-->
						<div class="modal fade" id="tham-gia-phong" tabindex="-1"
							role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal">
											<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
										</button>
										<h4 class="modal-title" id="myModalLabel1">Tham gia phòng</h4>
									</div>
									<form class="form-horizontal" role="form">
										<div class="modal-body">
											<div class="form-group">
												<label for="room" class="col-sm-3 control-label">Nhập
													mã phòng</label>
												<div class="col-sm-9">
													<input type="text" class="form-control" id="id_room2"
														placeholder="Mã phòng">
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-default"
												data-dismiss="modal">Hủy</button>
											<button type="submit" id="search_room"
												class="btn btn-primary" data-toggle="modal"
												data-target="#tim-phong" data-dismiss="modal">Tìm
												phòng</button>
										</div>
									</form>
								</div>
							</div>
						</div>
						<!--						hiển thị div tìm phong-->
						<div class="modal fade" id="tim-phong" tabindex="-1" role="dialog"
							aria-labelledby="myModalLabel1" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal">
											<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
										</button>
										<h4 class="modal-title" id="myModalLabel1">Tham gia phòng</h4>
									</div>
									<form class="form-horizontal" role="form">
										<div class="modal-body">
											<div class="form-group">
												<label for="room" class="col-sm-3 control-label">Tên
													phòng</label>
												<div class="col-sm-9">
													<input type="text" class="form-control"
														id="room_name_participation" placeholder="Tên phòng"
														readonly>
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-default"
												data-dismiss="modal">Hủy</button>
											<button type="button" class="btn btn-primary"
												id="participation">Tham gia</button>
										</div>
									</form>
								</div>
							</div>
						</div>
						<!--						danh sách phòng quản lý-->
						<div class="divcontent">
							<h4>Phòng quản lý</h4>
							<select class="form-control"
								onchange="if(this.value!=null && this.value!= undefined && this.value!='') location= this.value;">
								<option value="">Chọn phòng</option>
								<th:block th:each="room : ${listRoomManager}">
									<option th:text="${room.roomName}+' - '+${room.idRoom}"
										th:value="@{/classRoom/{idRoom}(idRoom=${room.idRoom})}"></option>
								</th:block>
							</select>
							<hr />
							<button type="button" class="btn btn-default" data-toggle="modal"
								data-target="#tao-phong">
								<i class="fa fa-plus"></i> Tạo phòng mới<i></i>
							</button>
						</div>

						<div class="footer" th:frame="footer">
							<footer>
								<p>Hệ thống quản lý học tập © 2017</p>
							</footer>
						</div>

					</div>

					<!--						hiển thị div nhập mã phòng-->
					<div class="modal fade" id="tao-phong" tabindex="-1" role="dialog"
						aria-labelledby="myModalLabel2" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal">
										<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
									</button>
									<h4 class="modal-title" id="myModalLabel2">Tạo phòng</h4>
								</div>
								<form class="form-horizontal" role="form">
									<div class="modal-body">
										<div class="form-group">
											<label for="room" class="col-sm-3 control-label">Nhập
												tên phòng</label>
											<div class="col-sm-9">
												<input type="text" class="form-control" id="name_room"
													placeholder="Tên phòng" required>
											</div>
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-default"
											data-dismiss="modal">Hủy</button>
										<button type="submit" class="btn btn-primary" id="createroom"
											data-toggle="modal" data-target="#ma-phong"
											data-dismiss="modal">Tạo phòng</button>
									</div>
								</form>
							</div>
						</div>
					</div>

					<!--					mã phòng-->
					<div class="modal fade" id="ma-phong" tabindex="-1" role="dialog"
						aria-labelledby="myModalLabel3" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal">
										<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
									</button>
									<h4 class="modal-title" id="myModalLabel3">Mã phòng</h4>
								</div>
								<div class="modal-body">
									<form class="form-horizontal" role="form">
										<div class="form-group">
											<label for="room" class="col-sm-3 control-label">Mã
												phòng</label>
											<div class="col-sm-6">
												<input type="text" class="form-control" id="id_room"
													placeholder="Mã phòng" readonly>
											</div>
											<div class="col-sm-3">
												<button type="button" class="btn-copy btn btn-default"
													data-clipboard-action="copy"
													data-clipboard-target="#id_room">Sao chép</button>
											</div>
										</div>
									</form>
								</div>
								<div class="modal-footer">
									<a th:href="@{/home}"><button type="button"
											class="btn btn-primary">Xác nhận</button></a>
								</div>
							</div>
						</div>

					</div>

					<div class="col-md-8">
						<div class="divcontent">
							<div class="status row">
								<div class="col-lg-1 col-md-1 col-sm-1 col-xs-2 media">
									<img class="media-photo img-responsive avt"
										th:src="@{/images/15284079_583315985195410_4289784661158093094_n.jpg}"
										alt="Ảnh đại diện" />
								</div>
								<div class="col-lg-11 col-md-11 col-sm-11 col-xs-10 cnt">
									<div class="people-stt">
										<a href="#"><strong>Trần Văn Thắng </strong></a> đã đăng trong
										<a href="#"><strong>Phòng 1 </strong></a> <br /> <span
											style="color: #B2B2B2">1 phút trước</span>
									</div>
								</div>
							</div>
							<div class="content-stt">Xin chào</div>
							<hr />
							<div style="color: #B2B2B2; text-align: right">
								<i class="fa fa-comments-o"> <strong>Bình luận (2)</strong></i>
							</div>
							<hr />
							<div class="comment">
								<div class="cmt-input row">
									<div class="col-lg-1 col-md-1 col-sm-1 col-xs-2 media">
										<img class="media-photo img-responsive avt"
											th:src="@{/images/15284079_583315985195410_4289784661158093094_n.jpg}"
											alt="Ảnh đại diện" />
									</div>
									<div class="col-lg-11 col-md-11 col-sm-11 col-xs-10 cnt">
										<input type="text" class="form-control"
											placeholder="Nhập bình luận" />
									</div>
								</div>
								<!--   								bình luận thứ 1-->
								<br />
								<div class="cmt row">
									<div class="col-lg-1 col-md-1 col-sm-1 col-xs-2 media">
										<img class="media-photo img-responsive avt"
											th:src="@{/images/15284079_583315985195410_4289784661158093094_n.jpg}"
											alt="Ảnh đại diện" />
									</div>
									<div class="col-lg-11 col-md-11 col-sm-11 col-xs-10 cnt">
										<div class="people-stt">
											<a href="#"><strong>Trương Tam Lang </strong></a> Trời đ*
										</div>
									</div>
								</div>
								<!--   								bình luận thứ 2-->
								<br />
								<div class="cmt row">
									<div class="col-lg-1 col-md-1 col-sm-1 col-xs-2 media">
										<img class="media-photo img-responsive avt"
											th:src="@{/images/15284079_583315985195410_4289784661158093094_n.jpg}"
											alt="Ảnh đại diện" />
									</div>
									<div class="col-lg-11 col-md-11 col-sm-11 col-xs-10 cnt">
										<div class="people-stt">
											<a href="#"><strong>Trương Tam Lang </strong></a> Trời đ*
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="clearfix visible-xs-block"></div>
				</div>
			</div>
		</div>
	</div>

	<!--java script-->
	<script th:src="@{/js/jquery-3.1.1.min.js}"></script>
	<script th:src="@{/bootstrap/js/bootstrap.min.js}"></script>
	<script th:src="@{/js/profile.js}"></script>
	<script th:src="@{/js/clipboard.min.js}"></script>
	<script>
		$(document)
				.ready(
						function() {
							$("#participation")
									.click(
											function(e) {
												var id_room = $("#id_room2")
														.val();
												$
														.ajax({
															url : "/participationroom",
															type : "POST",
															data : {
																id_room : id_room
															},
															success : function(
																	response) {
																console
																		.log(response);
																if (!response) {
																	alert("Đăng ký tham gia phòng thất bại! Có lẻ bạn đã tham gia phòng này!")
																} else {
																	alert("Đăng ký tham gia phòng thành công!")
																}
																$("#id_room2")
																		.val("");
																window.location = "/";
															}
														});

											});

							$("#search_room")
									.click(
											function() {
												var id_room = $("#id_room2")
														.val();
												$
														.ajax({
															url : "/searchroom",
															type : "POST",
															data : {
																id_room : id_room
															},
															success : function(
																	response) {
																if (response == "false") {
																	alert("Phòng không tồn tại!");
																	$(
																			"#id_room2")
																			.val(
																					"");
																	$(
																			"#participation")
																			.attr(
																					'disabled',
																					'disabled');
																	return false;
																} else {
																	$(
																			"#room_name_participation")
																			.val(
																					response);
																	$(
																			"#participation")
																			.removeAttr(
																					'disabled');
																	return true;
																}
															}

														});

											});

							$("#createroom")
									.click(
											function() {
												var name_room = $("#name_room")
														.val().trim();
												if (!name_room
														|| name_room == undefined
														|| name_room == ""
														|| name_room == 0) {
													alert("Bạn cần nhập tên phòng!");
													return false;
												} else {
													$
															.ajax({
																url : "/createroom",
																type : "POST",
																data : {
																	name_room : name_room
																},
																success : function(
																		response) {
																	if (response == "false") {
																		alert("Tạo phòng thất bại!");
																		return false;
																	} else {
																		$(
																				"#id_room")
																				.val(
																						response);
																	}
																}

															});
													$("#name_room").val("");
													return true;
												}

											});
						}

				);
		var clipboard = new Clipboard('.btn-copy');

		clipboard.on('success', function(e) {
			console.log(e);
		});

		clipboard.on('error', function(e) {
			console.log(e);
		});
	</script>
	<script>
		document.getElementById("close-slide").style.display = "none";
		function openNav() {
			document.getElementById("mySidenav").style.width = "250px";
			document.getElementById("open-slide").style.display = "none";
			document.getElementById("close-slide").style.display = "block";
		}

		function closeNav() {
			document.getElementById("mySidenav").style.width = "0";
			document.getElementById("open-slide").style.display = "block";
			document.getElementById("close-slide").style.display = "none";
		}
	</script>
</body>
</html>
